{{> head}}
{{> header}}

<main class="site-root">
  <section class="edit-profile-page">
    <div class="container">
      <div class="edit-profile-card">
        <div class="profile-brand">
          <img src="/img/logo-pngegg.png" alt="Pluvia Academy" class="brand-logo" />
          <h2 class="brand-name">Pluvia Academy</h2>
        </div>

        <h1 class="edit-title">Edit Profile</h1>

        <div class="image-preview-container" id="imagePreviewContainer">
          {{#if profile.avatar_url}}
            <img src="{{profile.avatar_url}}" alt="Preview" class="image-preview" id="imagePreview" />
          {{else}}
            <div class="avatar-placeholder-edit" id="avatarPlaceholderEdit">
              <span class="avatar-initial-edit">{{profile.initial}}</span>
            </div>
          {{/if}}
          <button type="button" class="remove-image-btn" id="removeImageBtn">
            Hapus
          </button>
        </div>

        <form id="editProfileForm" action="/profile/edit" method="POST" enctype="multipart/form-data" class="edit-profile-form">
          <input type="hidden" id="removeAvatar" name="removeAvatar" value="false" />
          
          <div class="form-group">
            <input 
              type="text" 
              id="fullName" 
              name="fullName" 
              class="form-input" 
              placeholder="Nama Pengguna"
              value="{{profile.full_name}}"
              required
            />
          </div>

          <div class="form-group">
            <input 
              type="tel" 
              id="phone" 
              name="phone" 
              class="form-input" 
              placeholder="Nomor HP"
              value="{{profile.phone}}"
              required
            />
          </div>

          <div class="form-group">
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="form-input" 
              placeholder="Email"
              value="{{profile.email}}"
              required
            />
          </div>

          <div class="form-group password-group">
            <input 
              type="password" 
              id="password" 
              name="password" 
              class="form-input password-field" 
              placeholder="Masukkan Password Baru"
            />
            <button type="button" class="toggle-password-btn" aria-label="Tampilkan password">
              <img src="/img/eye-closed.png" alt="show" class="eye-icon" />
            </button>
          </div>

          <div class="form-group password-group">
            <input 
              type="password" 
              id="confirmPassword" 
              name="confirmPassword" 
              class="form-input password-field" 
              placeholder="Konfirmasi Password Baru"
            />
            <button type="button" class="toggle-password-btn" aria-label="Tampilkan password">
              <img src="/img/eye-closed.png" alt="show" class="eye-icon" />
            </button>
          </div>

          <div class="form-group file-upload-group">
            <label for="profilePicture" class="file-upload-label">
              <img src="/img/nav-user.png" alt="upload" class="upload-icon" />
              <span class="upload-text">Pilih Gambar Profile</span>
            </label>
            <input 
              type="file" 
              id="profilePicture" 
              name="profilePicture" 
              class="file-input" 
              accept="image/*"
            />
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-confirm">Konfirmasi</button>
            <a href="/profile" class="btn-cancel">Batal</a>
          </div>
        </form>
      </div>
    </div>
  </section>
</main>

{{> footer}}
